<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>轮播图</title>
  <style>
    body {
      margin: 0;
      background-color: #1e1e1e;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .carousel-container {
      width: 90%;
      max-width: 1000px;
      height: 300px;
      position: relative;
      overflow: hidden;
    }

    .carousel-banner {
      list-style: none;
      position: absolute;
      padding: 0;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
      width: 100%;
      height: 100%;
    }

    .carousel-banner:hover {
      cursor: pointer;
    }

    .carousel-slide {
      float: left;
      position: absolute;
      left: 0px;
      transition: all 0.4s ease;
    }

    .carousel-img {
      width: 90%;
      height: 70%;
      border-radius: 15px;
      object-fit: cover;
    }

    .carousel-indicator {
      width: 50px;
      height: 5px;
      border: 1px solid rgb(156, 156, 156);
      bottom: -40px;
      position: absolute;
      background-color: white;
    }

    .carousel-indicator.active {
      background-color: #e431fc;
    }

    .carousel-arrow {
      position: absolute;
      top: 0;
      bottom: 0;
      margin: auto;
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 50%;
      text-align: center;
      line-height: 40px;
      font-size: 24px;
      cursor: pointer;
      z-index: 10;
      user-select: none;
    }

    .carousel-arrow.left {
      left: 10px;
    }

    .carousel-arrow.right {
      right: 10px;
    }
  </style>
</head>
<body>

  <div class="carousel-container">
    <ul id="banner" class="carousel-banner"></ul>
  </div>

  <script>
    window.onload = function () {
      const imageCount = 5;
      const banner = document.getElementById("banner");
      const slides = [];
      const indicators = [];
      let currentIndex = imageCount - 2;

      // 创建图片
      for (let i = 1; i <= imageCount; i++) {
        const li = document.createElement("li");
        li.className = "carousel-slide";
        const img = document.createElement("img");
        img.src = `imgs/Home/${i}.jpg`;
        img.className = "carousel-img";
        li.appendChild(img);
        banner.appendChild(li);
        slides.push(li);
        li.style.left = "0px";

        // 指示器
        const dot = document.createElement("div");
        dot.className = "carousel-indicator";
        dot.style.left = `${125 * i}px`;
        dot.setAttribute("name", i);
        banner.appendChild(dot);
        indicators.push(dot);
      }

      // 左右按钮
      const leftBtn = document.createElement("div");
      leftBtn.className = "carousel-arrow left";
      leftBtn.innerHTML = "&#10094;";
      banner.appendChild(leftBtn);

      const rightBtn = document.createElement("div");
      rightBtn.className = "carousel-arrow right";
      rightBtn.innerHTML = "&#10095;";
      banner.appendChild(rightBtn);

      for (let i = 0; i < slides.length; i++) {
        slides[i].id = imageCount - i;
      }

      let sz = [...slides];
      let timer = setInterval(getNext, 3000);

      leftBtn.onclick = () => {
        clearInterval(timer);
        getPrev();
        timer = setInterval(getNext, 3000);
      };

      rightBtn.onclick = () => {
        clearInterval(timer);
        getNext();
        timer = setInterval(getNext, 3000);
      };

      function updateLayout() {
        const len = sz.length - 1;
        for (let i = 0; i < sz.length; i++) {
          sz[i].style.zIndex = i;
          sz[i].style.transform = "scale(1)";
        }

        sz[len - 2].style.left = "0px";
        sz[len - 1].style.zIndex = 100;
        sz[len - 1].style.left = "50%";
        sz[len - 1].style.transform = "translateX(-50%) scale(1.3)";
        sz[len].style.left = "400px";

        syncIndicators();
      }

      function getNext() {
        let give_up = sz[sz.length - 1];
        sz.pop();
        sz.unshift(give_up);
        updateLayout();
      }

      function getPrev() {
        let give_up = sz[0];
        sz.shift();
        sz.push(give_up);
        updateLayout();
      }

      function syncIndicators() {
        for (let i = 0; i < indicators.length; i++) {
          indicators[i].classList.toggle("active", indicators[i].getAttribute("name") == sz[sz.length - 2].id);
        }
      }

      updateLayout();
    };
  </script>

</body>
</html>
